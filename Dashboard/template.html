<!--to convert go here :
http://www.accessify.com/tools-and-wizards/developer-tools/html-javascript-convertor/
-->
<toaster-container toaster-options="{'time-out': 3000}"></toaster-container>

<div>
    <div class="row clearfix">
        <div class="col-md-12 column">
            <b>HPI Encoder ver {{version}}</b>
        </div>
    </div>
    <div class="row clearfix" ng-hide="isInputFieldsAreValid">
        <div class="col-md-12 column">
            WARNING : the input fields were change since the last update. Pls contact Mike to fix this. You know
            where you can find me.
        </div>
    </div>
    <div class="row clearfix" ng-show="isInputFieldsAreValid">
        <div class="col-md-12 column">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Step 1 : Input the CSV to parse
                    </h3>
                </div>
                <div class="panel-body">
                    <form role="form">
                        <div class="form-group">
                            <label for="csvText">Paste CSV content here</label>
                            <textarea class="form-control" id="csvText" ng-model="csvContent"></textarea>
                        </div>
                        <div class="btn-group" role="group" aria-label="...">
                            <button type="submit" class="btn btn-primary" ng-click="Parse()">Parse</button>
                            <button type="submit" class="btn btn-default" ng-click="csvContent=''">Clear</button>
                        </div>
                        <span ng-show="parseMessage!=''" class="text-danger">{{parseMessage}}</span>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row clearfix" ng-show="isInputFieldsAreValid">
        <div class="col-md-12 column">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Step 2 : User Dasboard
                    </h3>
                </div>
                <div class="panel-body">
                    <div class="btn-group" role="group" aria-label="...">
                        <button type="submit" class="btn btn-primary" ng-click="Download()" ng-disabled="!isDone">
                            Download All
                        </button>
                        <button type="submit" class="btn btn-danger" ng-click="Stop()">Stop
                        </button>
                        <button type="button" class="btn btn btn-default" ng-csv="getArrayForCsv()"
                                filename="dashboard.csv"
                                csv-header="['Username', 'TotalQB', 'Rebates', 'TotalProductVoucher','ActiveAccnt','NewEntry','ReadyRorEncashment','EncashmentHistory']">
                            Export
                        </button>
                        <input type="checkbox" ng-change="selectAllFn(selectAll)"
                               ng-checked="isSelectedAll()" ng-model="selectAll"/> Skip?
                    </div>
                    <ul>
                        <li ng-repeat="user in users">
                            <table class="table table-condensed">
                                <tbody>
                                <tr>
                                    <td>No</td>
                                    <td>{{user.Index}}</td>
                                </tr>
                                <tr>
                                    <td>User Name</td>
                                    <td><input type="input" ng-model="user.UserName"/></td>
                                </tr>
                                <tr>
                                    <td>Password</td>
                                    <td><input type="input" ng-model="user.Password"/></td>
                                </tr>
                                <tr>
                                    <td>E-Wallet</td>
                                    <td>{{user.Wallet}}</td>
                                </tr>
                                <tr>
                                    <td>Total QB</td>
                                    <td>{{user.TotalQB}}</td>
                                </tr>
                                <tr>
                                    <td>Total Rebates</td>
                                    <td>{{user.TotalRebates}}</td>
                                </tr>
                                <tr>
                                    <td>Total Product Voucher</td>
                                    <td>{{user.TotalProductVoucher}}</td>
                                </tr>
                                <tr>
                                    <td>Active Accounts</td>
                                    <td>{{user.ActiveAccnt}}</td>
                                </tr>
                                <tr>
                                    <td>NewEntry Code</td>
                                    <td>{{user.NewEntry}}</td>
                                </tr>
                                <tr>
                                    <td>Ready Ror Encashment</td>
                                    <td ng-class="{info: user.HasBlue}">{{user.ReadyRorEncashment}}</td>
                                </tr>
                                <tr>
                                    <td>Encashment History</td>
                                    <td>{{user.EncashmentHistory}}</td>
                                </tr>
                                <tr>
                                    <td>Status</td>
                                    <td ng-class="{danger: user.IsError, success: user.IsSuccess}">{{user.Status}}</td>
                                </tr>
                                <tr>
                                    <td>Skip?</td>
                                    <td><input type="checkbox" ng-model="user.WasDownloaded"/></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>
                                        <button ng-click="LoginToDownloadOneItem(user)" ng-disabled="!isDone"
                                                class="btn btn-default">
                                            {{user.DownloadBtn}}
                                        </button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </li>
                    </ul>
                    <div class="btn-group" role="group" aria-label="...">
                        <button type="submit" class="btn btn-primary" ng-click="Download()" ng-disabled="!isDone">
                            Download All
                        </button>
                        <button type="submit" class="btn btn-danger" ng-click="Stop()">Stop
                        </button>
                        <button type="button" class="btn btn btn-default" ng-csv="getArrayForCsv()"
                                filename="dashboard.csv"
                                csv-header="['Username', 'TotalQB', 'Rebates', 'TotalProductVoucher','ActiveAccnt','NewEntry','ReadyRorEncashment','EncashmentHistory']">
                            Export
                        </button>
                        <input type="checkbox" ng-change="selectAllFn(selectAll)"
                               ng-checked="isSelectedAll()" ng-model="selectAll"/> Skip?
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row clearfix" ng-show="isInputFieldsAreValid">
        <div class="col-md-12 column">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Logs
                    </h3>
                </div>
                <div class="panel-body">
                    <table>
                        <tr ng-repeat="log in logs.slice().reverse() track by $index">
                            <th>
                                {{log}}
                            </th>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
