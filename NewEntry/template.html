<!--to convert go here :
http://www.accessify.com/tools-and-wizards/developer-tools/html-javascript-convertor/
-->
<toaster-container toaster-options="{'time-out': 3000}"></toaster-container>

<div>
    <div class="row clearfix">
        <div class="col-md-12 column">
            <b>HPI Encoder ver {{version}}</b>
        </div>
    </div>
    <div class="row clearfix" ng-hide="isInputFieldsAreValid">
        <div class="col-md-12 column">
            WARNING : the input fields were change since the last update. Pls contact Mike to fix this. You know
            where you can find me.
        </div>
    </div>
    <div class="row clearfix" ng-show="isInputFieldsAreValid">
        <div class="col-md-12 column">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Step 1 : Input the CSV to parse
                    </h3>
                </div>
                <div class="panel-body">
                    <form role="form">
                        <div class="form-group">
                            <label for="csvText">Paste CSV content here</label>
                            <textarea class="form-control" id="csvText" ng-model="csvContent"></textarea>
                        </div>
                        <div class="btn-group" role="group" aria-label="...">
                            <button type="submit" class="btn btn-primary" ng-click="Parse()">Parse</button>
                            <button type="submit" class="btn btn-default" ng-click="csvContent=''">Clear</button>
                        </div>
                        <span ng-show="parseMessage!=''" class="text-danger">{{parseMessage}}</span>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row clearfix" ng-show="isInputFieldsAreValid">
        <div class="col-md-12 column">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Step 2 : Input user information
                    </h3>
                </div>
                <div class="panel-body">
                    <form role="form" class="form-horizontal">
                        <div class="form-group">
                            <label for="uplineUserCode" class="col-sm-2 control-label">Upline User Code</label>
                            <div class="col-sm-10">
                                <input type="text" id="uplineUserCode" class="form-control"
                                       placeholder="Your Upline User Code" ng-model="uplineUserCode" capitalize/>
                            </div>

                        </div>
                        <div class="form-group">
                            <label for="firstName" class="col-sm-2 control-label">First Name</label>
                            <div class="col-sm-10">
                                <input type="text" id="firstName" class="form-control" placeholder="First Name"
                                   ng-model="firstName" capitalize/>
                            </div>
                        </div>
                        <div class="form-group" ng-show="false">
                            <label for="middleName" class="col-sm-2 control-label">Middle Name</label>
                            <div class="col-sm-10">
                                <input type="text" id="middleName" class="form-control" placeholder="Middle Name"
                                   ng-model="middleName" capitalize/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="lastName" class="col-sm-2 control-label">Last Name</label>
                            <div class="col-sm-10">
                                <input type="text" id="lastName" class="form-control" placeholder="Last Name"
                                   ng-model="lastName" capitalize/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="userPassword" class="col-sm-2 control-label">User Password</label>
                            <div class="col-sm-10">
                                <input type="text" id="userPassword" class="form-control" placeholder="User Password"
                                   ng-model="password"/>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row clearfix" ng-show="isInputFieldsAreValid">
        <div class="col-md-12 column">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Step 3 : Correct the fields below and click Encode.
                    </h3>
                </div>
                <div class="panel-body">
                    <p class="text-warning">To enable encode one item, you must first check action checkbox. This is to avoid accidental click</p>
                    <div class="btn-group" role="group" aria-label="...">
                        <button type="submit" class="btn btn-primary" ng-click="Encode()" ng-disabled="!isDone">Encode
                            All
                        </button>
                        <button type="submit" class="btn btn-danger" ng-click="StopEncoding()">Stop
                        </button>
                        <button type="button" class="btn btn btn-default" ng-csv="getArrayForCsv()" filename="encoded.csv"
                                csv-header="['User Code', 'Referred By', 'Activation Code']">Export
                        </button>
                    </div>
                    <table class="table">
                        <thead>
                        <tr>
                            <th>
                                #
                            </th>
                            <th>
                                User Code
                            </th>
                            <th>
                                Referred By
                            </th>
                            <th>
                                Activation Code
                            </th>
                            <th>
                                Status
                            </th>
                            <th>
                                <input type="checkbox" ng-change="selectAllFn(selectAll)"
                                       ng-checked="isSelectedAll()" ng-model="selectAll"/> Was Encoded
                            </th>
                            <th>
                                <input type="checkbox" ng-model="enableEncodeOneItem"
                                       alt="Enable Encode One By One. By default this is disable to prevent accident."/>
                                Action
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="account in accounts" ng-class="{danger: account.IsError, success: account.IsSuccess}">
                            <th>
                                {{account.Index}}
                            </th>
                            <th>
                                <input type="input" ng-model="account.UserCode"/>
                            </th>
                            <th>
                                <input type="input" ng-model="account.ReferredBy"/>
                            </th>
                            <th>
                                <input type="input" ng-model="account.ActivationCode"
                                       ng-change="ActivationCodeChange(account)"/>
                            </th>
                            <th>
                                {{account.Status}}
                            </th>
                            <th>
                                <input type="checkbox" ng-model="account.WasEncoded"/>
                            </th>
                            <th>
                                <button ng-click="EncodeOneItem(account)" ng-disabled="!isDone || !enableEncodeOneItem">
                                    Encode
                                </button>
                            </th>
                        </tr>
                        </tbody>
                    </table>
                    <p class="text-warning">To enable encode one item, you must first check action checkbox. This is to avoid accidental click</p>
                    <div class="btn-group" role="group" aria-label="...">
                        <button type="submit" class="btn btn-primary" ng-click="Encode()" ng-disabled="!isDone">Encode
                            All
                        </button>
                        <button type="submit" class="btn btn-danger" ng-click="StopEncoding()">Stop
                        </button>
                        <button type="button" class="btn btn btn-default" ng-csv="getArrayForCsv()" filename="encoded.csv"
                                csv-header="['User Code', 'Referred By', 'Activation Code']">Export
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row clearfix" ng-show="isInputFieldsAreValid">
        <div class="col-md-12 column">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Logs
                    </h3>
                </div>
                <div class="panel-body">
                    <table>
                        <tr ng-repeat="log in logs.slice().reverse() track by $index">
                            <th>
                                {{log}}
                            </th>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
